{{define "channel"}}
<div class="row
    {{if eq .Type 0}}channel{{else}}spacer{{end}}
    {{if .Repeat}} repeat spacer-mono{{end}}
    {{if eq .Align 0}} spacer-left
    {{else if eq .Align 1}} spacer-center
    {{else}} spacer-right{{end}}"
    {{if .Repeat}}data-pattern="{{.Name}}"{{end}}>
{{- .Name -}}
</div>

{{if .Clients}}
<div class="children">
    {{range .Clients}}
        <div class="row client">
            <span class="status-dot"></span>{{.Nickname}}
        </div>
    {{end}}
</div>
{{end}}

{{if .Children}}
<div class="children">
    {{range .Children}}
        {{template "channel" .}}
    {{end}}
</div>
{{end}}
{{end}}

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>TS6 Viewer</title>

<link rel="stylesheet" href="/static/{{.Theme}}.css">
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer" />
</head>

<body>

<button id="refreshButton">
    ðŸ”„ <span id="refreshButtonText">{{.RefreshInterval}}</span>
</button>

<div class="server-info">
    {{ if .VMServer.HostConnectionLink }}
        <h1 id="server-name">
            <a href="ts3server://{{ .VMServer.HostConnectionLink }}">
                {{ .VMServer.Name }}
            </a>
        </h1>
    {{ else }}
        <h1 id="server-name">{{ .VMServer.Name }}</h1>
    {{ end }}

    <div><span>User: </span> {{.VMServer.ClientsOnline}} / {{.VMServer.MaxClients}}</div>
    <div><span>Client Connections:</span> {{.VMServer.ClientConnections}}</div>
    <div><span>Uptime:</span> {{.VMServer.UptimePretty}}</div>
    <div><span>ChannelsOnline:</span> {{.VMServer.ChannelsOnline}}</div>
    {{ if .VMServer.HostBannerURL }}
    <div>
        <div class="banner-url">
            <a href="{{ .VMServer.HostBannerURL }}">{{ .VMServer.HostBannerURL }}</a>
        </div>
    </div>
    {{ end }}
</div>

<div id="channels">
    {{range .VMChannels}}
        {{template "channel" .}}
    {{end}}
</div>

<script>
let refreshTime = Number("{{.RefreshInterval}}") || 60;
</script>
<script src="/static/ts6viewer.js"></script>

</body>
</html>
